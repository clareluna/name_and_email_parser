<!DOCTYPE html>
<head>
	<title>Clare's Tech Question Response
	</title>
	<style>
	textarea {
		border-radius: 1em;
		margin-left: 2em;
		margin-right: 2em;
	}
	p {
		margin-left: 2em;	
		margin-right: 2em;
	}
	</style>
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
	<textarea id="myTextarea" rows="10" col="100" placeholder="input emails here"></textarea>
	<input type="submit" value="submit"onclick="return sendData();" />
	<p id="emails">This is where the output will be</p>

	<script>

		function sendData() {
			var inputArray = $('textarea').val().split(/\n|\r/);
			var outgoingData = document.getElementById('emails');
			var outputArray = [];
			var re = /\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;

			for(var i = 0; i < inputArray.length; i++) {
				inputArray[i] = inputArray[i].replace(/"/g, ""); 
				var name = '"' + inputArray[i].substr(0, inputArray[i].indexOf('<')-1)+ '"';
				var email = inputArray[i].substr(inputArray[i].indexOf('<')+1, inputArray[i].indexOf('>'));
				
				if(!re.test(email)){
					email = 'invalid email address>';
				}

				email = "&lt;" + email;

				outputArray.push(name + ' ' + email + ' ');
			};
			outgoingData.innerHTML = outputArray;
	}	
	</script>

</body>
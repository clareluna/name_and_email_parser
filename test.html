<!DOCTYPE html>
<head>
	<title>Clare's Tech Question Response
	</title>
	<style>
	textarea {
		border-radius: 1em;
		margin-left: 2em;
		margin-right: 2em;
	}
	p {
		margin-left: 2em;	
		margin-right: 2em;
	}
	</style>
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
	<textarea id="myTextarea" rows="10" col="100" placeholder="input emails here"></textarea>
	<input type="submit" value="submit"onclick="return sendData();" />
	<p id="emails"></p>

	<script>

		function sendData() {
			var inputArray = $('textarea').val().split(/\n|\r/);
			var outgoingData = document.getElementById('emails');
			var reTest = /\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
			
			for(var i = 0; i < inputArray.length; i++) {
				inputArray[i] = inputArray[i].replace(/"/g, ""); 

				var name = inputArray[i].substr(0, inputArray[i].indexOf('<')-1);
				if(name.length === 0) {
					name = inputArray[i].substr(inputArray[i].indexOf('<')+1, inputArray[i].indexOf('>')-1);
				};

				var email = inputArray[i].substr(inputArray[i].indexOf('<')+1, inputArray[i].length);
				email = email.substr(0, email.length-1);
				if(!reTest.test(email)){
					email = '<b>invalid email address:</b> ' + email;
				};

				outgoingData.innerHTML += (name + ' ' + email + '<br>');
			};
	}	
	</script>

</body>